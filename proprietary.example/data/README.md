# Data Directory

This directory contains your domain-specific training data.

## Files You Create

### `training_questions.json` (Required)

Your initial dataset of domain-specific questions in DPO format.

**Format:**
```json
[
  {
    "id": "your_domain_001",
    "prompt": "Your question or scenario here",
    "chosen": "High-quality, detailed, expert-level response that the model should learn to prefer",
    "rejected": "Lower-quality, superficial response that the model should learn to avoid",
    "metadata": {
      "category": "your_category",
      "difficulty": "beginner|intermediate|advanced|expert",
      "debate_worthy": true
    }
  }
]
```

**Tips:**
- Start with 50-100 questions
- Each question should represent a real scenario from your domain
- "Chosen" responses should be what your best expert would say
- "Rejected" responses should be what a novice might say
- Categories help track training data balance

## Files Generated by Scripts

### `debate_results.json`

Full output from multi-agent debates. Created by `run_batch_debates.py`.

Contains:
- All agent responses for each round
- Consensus calculations
- Convergence analysis
- Metadata and timestamps

### `dpo_training_pairs.json`

Extracted DPO pairs from debates. Created by debate orchestrator.

Format:
```json
{
  "prompt": "Original question",
  "chosen": "[Majority consensus reasoning]",
  "rejected": "[Minority reasoning]",
  "metadata": {
    "consensus_strength": 0.8,
    "convergence": "improved",
    "debate_id": "seed_001"
  }
}
```

### `dpo_train.jsonl`

Training split (typically 80% of pairs). Created by dataset curator.

One JSON object per line (JSONL format):
```jsonl
{"prompt": "...", "chosen": "...", "rejected": "..."}
{"prompt": "...", "chosen": "...", "rejected": "..."}
```

### `dpo_val.jsonl`

Validation split (typically 20% of pairs). Created by dataset curator.

Same format as `dpo_train.jsonl`.

## Recommended Workflow

1. Create `training_questions.json` with your domain questions
2. Run debates: `python scripts/run_batch_debates.py ...`
3. Review `debate_results.json` for quality
4. Check `dpo_training_pairs.json` for consensus strength
5. Train with `dpo_train.jsonl` and `dpo_val.jsonl`

## Quality Guidelines

### Good Training Questions

✅ Specific scenarios requiring expert judgment
✅ Multiple valid approaches (debate-worthy)
✅ Clear distinction between novice and expert responses
✅ Representative of real-world use cases
✅ Balanced across categories

### Avoid

❌ Factual questions with single correct answer
❌ Yes/no questions without reasoning
❌ Questions too simple (no debate value)
❌ Questions too vague (ambiguous)
❌ Duplicate or near-duplicate questions

## Example: Legal Domain

```json
{
  "id": "legal_001",
  "prompt": "A client wants to include a non-compete clause in an employment contract for a software engineer in California. What should I advise?",
  "chosen": "In California, non-compete clauses are generally unenforceable under Business and Professions Code Section 16600, which states that 'every contract by which anyone is restrained from engaging in a lawful profession, trade, or business of any kind is to that extent void.'\n\nHowever, I would advise the client to consider these alternatives:\n\n1. **Non-Solicitation Agreement**: Prevent the employee from soliciting clients or other employees. These are generally enforceable in California if reasonable in scope and duration.\n\n2. **Confidentiality/NDA**: Protect trade secrets and proprietary information. California law strongly supports these agreements.\n\n3. **Intellectual Property Assignment**: Ensure any work product created during employment belongs to the company.\n\n4. **Garden Leave**: Pay the employee for a notice period during which they don't work but also can't join a competitor.\n\n5. **Equity with Vesting**: Create golden handcuffs through stock options that vest over time.\n\nThe key is focusing on protecting legitimate business interests (trade secrets, client relationships) rather than restricting competition itself. If the client insists on a non-compete, I would explain it's likely unenforceable and may create bad faith with the employee.",
  "rejected": "Non-compete clauses are standard in employment contracts. You should include one that prevents the engineer from working for competitors for 2 years after leaving. This protects your business interests.",
  "metadata": {
    "category": "employment_law",
    "difficulty": "advanced",
    "debate_worthy": true,
    "jurisdiction": "california"
  }
}
```

## Data Privacy

Remember:
- Don't include client names or identifying information
- Anonymize real scenarios
- Check for confidential information before committing
- This directory is gitignored by default

## See Also

- `../configs/debate_config.json` - Configure debate parameters
- `../../examples/datasets/` - Example questions for reference
- `../../docs/usage/` - Detailed usage guides
